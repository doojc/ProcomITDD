!function(){"use strict";angular.module("ITDD",["ngRoute","common.services"]).config(function(e,t){e.when("/",{controller:"projectListCtrl",controllerAs:"vm",templateUrl:"/App/Common/Views/Index.html"}).when("/Project",{controller:"projectListCtrl",controllerAs:"vm",templateUrl:"/App/Project/Views/projectListView.html"}).otherwise({redirectTo:"/"}),t.html5Mode({enabled:!0,requireBase:!1})})}();
!function(){"use strict";function e(e,s){var a=this;a.isLoggedIn=function(){return s.getProfile().isLoggedIn},a.message="",a.userData={userName:"",email:"",password:"",confirmPassword:""},a.registerUser=function(){a.userData.confirmPassword=a.userData.password,e.registration.registerUser(a.userData,function(e){a.confirmPassword="",a.message="... Registration successful",a.login()},function(e){if(a.isLoggedIn=!1,a.message=e.statusText+"\r\n",e.data.exceptionMessage&&(a.message+=e.data.exceptionMessage),e.data.modelState)for(var s in e.data.modelState)a.message+=e.data.modelState[s]+"\r\n"})},a.login=function(){a.userData.grant_type="password",a.userData.userName=a.userData.email,e.login.loginUser(a.userData,function(e){a.message="",a.password="",s.setProfile(a.userData.userName,e.access_token)},function(e){a.password="",a.message=e.statusText+"\r\n",e.data.exceptionMessage&&(a.message+=e.data.exceptionMessage),e.data.error&&(a.message+=e.data.error)})}}angular.module("ITDD").controller("MainCtrl",["userAccount","currentUser",e])}();
!function(){"use strict";angular.module("common.services",["ngResource"]).constant("appSettings",{serverPath:"http://localhost:58899"})}();
!function(){"use strict";function e(){var e={isLoggedIn:!1,username:"",token:""},n=function(n,r){e.username=n,e.token=r,e.isLoggedIn=!0},r=function(){return e};return{setProfile:n,getProfile:r}}angular.module("common.services").factory("currentUser",e)}();
!function(){"use strict";function e(e,r,t){return e(r.serverPath+"/api/products/:id",null,{get:{headers:{Authorization:"Bearer "+t.getProfile().token}},save:{headers:{Authorization:"Bearer "+t.getProfile().token}},update:{method:"PUT",headers:{Authorization:"Bearer "+t.getProfile().token}}})}angular.module("common.services").factory("productResource",["$resource","appSettings","currentUser",e])}();
!function(){"use strict";function e(e,r){return e(r.serverPath+"/api/project/:id")}angular.module("common.services").factory("projectService",["$resource","appSettings",e])}();
!function(){"use strict";function e(e,n){return{registration:e(n.serverPath+"/api/Account/Register",null,{registerUser:{method:"POST"}}),login:e(n.serverPath+"/Token",null,{loginUser:{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:function(e,n){var r=[];for(var o in e)r.push(encodeURIComponent(o)+"="+encodeURIComponent(e[o]));return r.join("&")}}})}}angular.module("common.services").factory("userAccount",["$resource","appSettings",e])}();
!function(){"use strict";function t(t){var e=this;e.product={},e.message="",t.get({id:5},function(t){e.product=t,e.originalProduct=angular.copy(t)},function(t){e.message=t.statusText+"\r\n",t.data.exceptionMessage&&(e.message+=t.data.exceptionMessage)}),e.product&&e.product.productId?e.title="Edit: "+e.product.productName:e.title="New Product",e.submit=function(){e.message="",e.product.productId?e.product.$update({id:e.product.productId},function(t){e.message="... Save Complete"},function(t){if(e.message=t.statusText+"\r\n",t.data.modelState)for(var a in t.data.modelState)e.message+=t.data.modelState[a]+"\r\n";t.data.exceptionMessage&&(e.message+=t.data.exceptionMessage)}):e.product.$save(function(t){e.originalProduct=angular.copy(t),e.message="... Save Complete"},function(t){if(e.message=t.statusText+"\r\n",t.data.modelState)for(var a in t.data.modelState)e.message+=t.data.modelState[a]+"\r\n";t.data.exceptionMessage&&(e.message+=t.data.exceptionMessage)})},e.cancel=function(t){t.$setPristine(),e.product=angular.copy(e.originalProduct),e.message=""}}angular.module("productManagement").controller("ProductEditCtrl",t)}();
!function(){"use strict";function r(r){var c=this;r.query({$filter:"contains(ProductCode, 'GDN') and Price ge 5 and Price le 20",$orderby:"Price desc"},function(r){c.products=r})}angular.module("ITDD").controller("ProductListCtrl",["productResource",r])}();
!function(){"use strict";function t(t){var r=this;r.getProjectList=function(){t.query(function(t){r.projects=t})}}angular.module("ITDD").controller("ProjectListCtrl",["projectService",t])}();